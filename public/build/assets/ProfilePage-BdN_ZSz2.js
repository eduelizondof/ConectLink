import{d as z,r as $,c as D,o as W,S as Y,w as E,e as d,l as g,m as l,F as I,x as C,v as x,n as M,g as r,z as B,k as s,f,t as k,p as S,Y as F,y as R,j as N,s as J,i as K}from"./vendor-CwJ9eRpz.js";import{u as q,f as T,e as O,h as Q,i as Z,_,b as ee,c as te,d as oe}from"./ProductsCatalog.vue_vue_type_script_setup_true_lang-CKgOTfHu.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{F as j,p as H,a as ne}from"./app-DH7hp9r8.js";import{X as G}from"./x-BzXzP8xs.js";import{P as ae}from"./package-DtOv7Zct.js";import{C as se}from"./chevron-right-CIYxK5Th.js";import{D as le}from"./download-Dhrr9OQm.js";import{S as ie}from"./share-2-CjvGIbR0.js";import{E as re}from"./eye-CMurwkyG.js";import{S as ce}from"./sparkles-Bi2ToExK.js";import"./megaphone-ByB0xrLA.js";import"./createLucideIcon-ColtdVoX.js";import"./circle-alert-B-UA-eer.js";import"./tag-C7WvpRuP.js";import"./info-BAcL9D50.js";import"./star-BtP3YK3B.js";const de=z({__name:"ProfileParticles",props:{style:{default:"dots"},color:{default:""},primaryColor:{default:"#3b82f6"},secondaryColor:{default:"#8b5cf6"},particleCount:{default:30},disabled:{type:Boolean,default:!1}},setup(e){const a=e,o=$(null);let n=null,m,c=[];const i=D(()=>a.color?[a.color]:[a.primaryColor,a.secondaryColor]);function b(t,y){const v=i.value[Math.floor(Math.random()*i.value.length)],u={x:Math.random()*t,y:Math.random()*y,color:v,alpha:Math.random()*.5+.2};switch(a.style){case"snow":return{...u,vx:(Math.random()-.5)*.3,vy:Math.random()*.5+.3,size:Math.random()*3+1};case"confetti":return{...u,vx:(Math.random()-.5)*.5,vy:Math.random()*.8+.2,size:Math.random()*4+2,rotation:Math.random()*360,rotationSpeed:(Math.random()-.5)*5};case"lines":return{...u,vx:(Math.random()-.5)*.2,vy:(Math.random()-.5)*.2,size:Math.random()*2+.5};default:return{...u,vx:(Math.random()-.5)*.15,vy:(Math.random()-.5)*.15,size:Math.random()*2+.5}}}function h(){if(!o.value||a.disabled)return;const t=o.value;if(t.width=window.innerWidth,t.height=window.innerHeight,n=t.getContext("2d"),!n)return;const y=window.innerWidth<768?Math.min(a.particleCount,20):a.particleCount;c=[];for(let v=0;v<y;v++)c.push(b(t.width,t.height))}function p(t){n&&(n.save(),n.globalAlpha=t.alpha,n.fillStyle=t.color,a.style==="confetti"&&t.rotation!==void 0?(n.translate(t.x,t.y),n.rotate(t.rotation*Math.PI/180),n.fillRect(-t.size/2,-t.size/4,t.size,t.size/2)):(n.beginPath(),n.arc(t.x,t.y,t.size,0,Math.PI*2),n.fill()),n.restore())}function U(){if(!n||a.style!=="lines")return;const t=100;for(let y=0;y<c.length;y++)for(let v=y+1;v<c.length;v++){const u=c[y].x-c[v].x,w=c[y].y-c[v].y,P=Math.sqrt(u*u+w*w);if(P<t){const X=(1-P/t)*.2;n.beginPath(),n.moveTo(c[y].x,c[y].y),n.lineTo(c[v].x,c[v].y),n.strokeStyle=`${c[y].color}`,n.globalAlpha=X,n.lineWidth=.5,n.stroke()}}n.globalAlpha=1}function A(){!n||!o.value||a.disabled||(n.clearRect(0,0,o.value.width,o.value.height),a.style==="lines"&&U(),c.forEach(t=>{t.x+=t.vx,t.y+=t.vy,t.rotation!==void 0&&t.rotationSpeed!==void 0&&(t.rotation+=t.rotationSpeed),t.x<0&&(t.x=o.value.width),t.x>o.value.width&&(t.x=0),a.style==="snow"||a.style==="confetti"?t.y>o.value.height&&(t.y=-10,t.x=Math.random()*o.value.width):(t.y<0&&(t.y=o.value.height),t.y>o.value.height&&(t.y=0)),p(t)}),m=requestAnimationFrame(A))}function V(){h()}return W(()=>{a.disabled||(h(),A(),window.addEventListener("resize",V))}),Y(()=>{m&&cancelAnimationFrame(m),window.removeEventListener("resize",V)}),E(()=>a.disabled,t=>{t?m&&cancelAnimationFrame(m):(h(),A())}),(t,y)=>e.disabled?g("",!0):(l(),d("canvas",{key:0,ref_key:"canvasRef",ref:o,class:"pointer-events-none fixed inset-0 z-0"},null,512))}}),ue={key:0,class:"fixed inset-0 z-0 overflow-hidden"},me=["src"],fe=["src"],ge=z({__name:"ProfileBackground",props:{settings:{}},setup(e){return q(e.settings),(o,n)=>(l(),d(I,null,[e.settings.background_type==="animated"&&e.settings.background_animated_media?(l(),d("div",ue,[e.settings.background_animated_media_type==="video"?(l(),d("video",{key:0,src:`/storage/${e.settings.background_animated_media}`,autoplay:"",loop:"",muted:"",playsinline:"",class:"absolute inset-0 w-full h-full object-cover"},null,8,me)):(l(),d("img",{key:1,src:`/storage/${e.settings.background_animated_media}`,alt:"Background",class:"absolute inset-0 w-full h-full object-cover"},null,8,fe)),(e.settings.background_animated_overlay_opacity||0)>0?(l(),d("div",{key:2,class:"absolute inset-0 bg-black pointer-events-none",style:x({opacity:(e.settings.background_animated_overlay_opacity||0)/100})},null,4)):g("",!0)])):g("",!0),e.settings.background_pattern&&e.settings.background_pattern!=="none"?(l(),d("div",{key:1,class:M(["fixed inset-0 pointer-events-none z-0",[`bg-pattern-${e.settings.background_pattern}`]]),style:x({opacity:(e.settings.background_pattern_opacity||10)/100})},null,6)):g("",!0),e.settings.background_type==="image"&&e.settings.background_overlay_opacity>0?(l(),d("div",{key:2,class:"fixed inset-0 bg-black pointer-events-none z-0",style:x({opacity:e.settings.background_overlay_opacity/100})},null,4)):g("",!0),e.settings.show_particles?(l(),C(r(de),{key:3,style:x(e.settings.particles_style),color:e.settings.particles_color,"primary-color":e.settings.primary_color,"secondary-color":e.settings.secondary_color,"particle-count":40},null,8,["style","color","primary-color","secondary-color"])):g("",!0)],64))}}),he=L(ge,[["__scopeId","data-v-c539f742"]]),ye={class:"relative bg-white rounded-t-3xl sm:rounded-3xl w-full max-w-lg max-h-[90vh] overflow-y-auto animate-slide-up"},ve={class:"aspect-video w-full overflow-hidden rounded-t-3xl sm:rounded-t-3xl bg-gray-100"},xe=["src","alt"],be={key:1,class:"w-full h-full flex items-center justify-center"},ke={class:"p-6"},pe={key:0,class:"mb-2"},we={class:"text-2xl font-bold text-gray-900 mb-2"},$e={key:1,class:"flex items-center gap-3 mb-4"},Ce={key:1,class:"px-2 py-1 text-xs font-semibold rounded-full bg-red-500 text-white"},ze={key:2,class:"text-gray-600 mb-4"},Me={key:3,class:"prose prose-sm text-gray-600 mb-6"},Pe={class:"flex items-center gap-2 mb-6"},Ae=["href"],Se=z({__name:"ProductModal",props:{modelValue:{type:Boolean},product:{},profile:{},settings:{}},emits:["update:modelValue"],setup(e,{emit:a}){const o=e,n=a;function m(){n("update:modelValue",!1)}const c=D(()=>o.product?.image?o.product.image.startsWith("http")||o.product.image.startsWith("/storage/")?o.product.image:`/storage/${o.product.image}`:null),i=D(()=>{const b=o.profile.social_links.find(h=>h.platform==="whatsapp");return!b||!o.product?null:`${b.url}?text=${encodeURIComponent(`Hola, me interesa: ${o.product.name}`)}`});return(b,h)=>(l(),C(F,{to:"body"},[e.modelValue&&e.product?(l(),d("div",{key:0,class:"fixed inset-0 z-50 flex items-end sm:items-center justify-center p-4",onClick:B(m,["self"])},[s("div",{class:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:m}),s("div",ye,[s("button",{onClick:m,class:"absolute top-4 right-4 z-10 p-2 rounded-full bg-black/10 hover:bg-black/20 transition-colors"},[f(r(G),{class:"w-5 h-5"})]),s("div",ve,[c.value?(l(),d("img",{key:0,src:c.value,alt:e.product.name,class:"w-full h-full object-cover"},null,8,xe)):(l(),d("div",be,[f(r(ae),{class:"w-20 h-20 text-gray-300"})]))]),s("div",ke,[e.product.category?(l(),d("div",pe,[s("span",{class:"inline-block px-3 py-1 text-xs font-medium rounded-full",style:x({backgroundColor:`${e.settings.primary_color}20`,color:e.settings.primary_color})},k(e.product.category.name),5)])):g("",!0),s("h2",we,k(e.product.name),1),e.product.price?(l(),d("div",$e,[e.product.sale_price&&e.product.sale_price<e.product.price?(l(),d("span",{key:0,class:"text-2xl font-bold",style:x({color:e.settings.primary_color})},k(r(T)(e.product.sale_price,e.product.currency)),5)):g("",!0),s("span",{class:M(e.product.sale_price&&e.product.sale_price<e.product.price?"line-through text-lg text-gray-400":"text-2xl font-bold"),style:x({color:e.product.sale_price&&e.product.sale_price<e.product.price?"":e.settings.primary_color})},k(r(T)(e.product.price,e.product.currency)),7),e.product.sale_price&&e.product.sale_price<e.product.price?(l(),d("span",Ce," -"+k(Math.round((e.product.price-e.product.sale_price)/e.product.price*100))+"% ",1)):g("",!0)])):g("",!0),e.product.short_description?(l(),d("p",ze,k(e.product.short_description),1)):g("",!0),e.product.description?(l(),d("div",Me,k(e.product.description),1)):g("",!0),s("div",Pe,[s("div",{class:M(["w-2 h-2 rounded-full",e.product.is_available?"bg-green-500":"bg-red-500"])},null,2),s("span",{class:M(["text-sm",e.product.is_available?"text-green-600":"text-red-600"])},k(e.product.is_available?"Disponible":"No disponible"),3)]),i.value?(l(),d("a",{key:4,href:i.value,target:"_blank",class:"flex items-center justify-center gap-2 w-full py-4 rounded-xl font-semibold text-white transition-all duration-300 hover:scale-[1.02]",style:{backgroundColor:"#25D366"}},[f(r(j),{icon:r(H),class:"w-5 h-5"},null,8,["icon"]),h[0]||(h[0]=S(" Consultar por WhatsApp ",-1))],8,Ae)):g("",!0)])])])):g("",!0)]))}}),Ve=L(Se,[["__scopeId","data-v-a4ffedc7"]]),De={class:"flex-1 min-w-0"},Ie={key:0,class:"font-semibold text-sm mb-1"},Le={class:"text-sm opacity-90"},Ue={key:1,class:"inline-flex items-center gap-1 text-sm font-semibold mt-2 hover:underline"},je=z({__name:"FloatingAlertItem",props:{alert:{}},emits:["dismiss"],setup(e,{emit:a}){const o=e,n=a;function m(){n("dismiss",o.alert.id)}return(c,i)=>(l(),C(R(e.alert.link_url?"a":"div"),{href:e.alert.link_url||void 0,target:e.alert.link_url?"_blank":void 0,rel:e.alert.link_url?"noopener noreferrer":void 0,class:M(["fixed z-50 max-w-sm mx-4 block",[r(O)(e.alert.position),r(Q)(e.alert.animation),e.alert.link_url?"cursor-pointer":""]])},{default:N(()=>[s("div",{class:M(["rounded-xl p-4 shadow-2xl flex items-start gap-3 transition-transform",e.alert.link_url?"hover:scale-[1.02]":""]),style:x({backgroundColor:e.alert.background_color,color:e.alert.text_color||"#ffffff"})},[(l(),C(R(r(Z)(e.alert.type)),{class:"w-5 h-5 flex-shrink-0 mt-0.5"})),s("div",De,[e.alert.title?(l(),d("p",Ie,k(e.alert.title),1)):g("",!0),s("p",Le,k(e.alert.message),1),e.alert.link_url&&e.alert.link_text?(l(),d("span",Ue,[S(k(e.alert.link_text)+" ",1),f(r(se),{class:"w-4 h-4"})])):g("",!0)]),e.alert.is_dismissible?(l(),d("button",{key:0,onClick:B(m,["stop","prevent"]),class:"p-1 rounded-full hover:bg-white/20 transition-colors"},[f(r(G),{class:"w-4 h-4"})])):g("",!0)],6)]),_:1},8,["href","target","rel","class"]))}}),Be=z({__name:"FloatingAlerts",props:{alerts:{},visibleAlerts:{},dismissedAlerts:{}},emits:["dismiss"],setup(e,{emit:a}){const o=e,n=a,m=D(()=>o.alerts.filter(i=>o.visibleAlerts.includes(i.id)&&!o.dismissedAlerts.includes(i.id)));function c(i){n("dismiss",i)}return(i,b)=>(l(),C(F,{to:"body"},[(l(!0),d(I,null,J(m.value,h=>(l(),C(je,{key:h.id,alert:h,onDismiss:c},null,8,["alert"]))),128))]))}}),Fe={class:"flex items-center justify-center gap-1 text-xs"},Re={class:"text-center mt-4"},Te=z({__name:"ProfileActions",props:{profile:{},organization:{},settings:{},isLoaded:{type:Boolean},currentUrl:{}},emits:["download-vcard","share"],setup(e,{emit:a}){const o=a;function n(){o("download-vcard")}function m(){o("share")}return(c,i)=>(l(),d(I,null,[s("div",{class:M(["flex gap-3 justify-center",{"opacity-0 translate-y-8":!e.isLoaded,"opacity-100 translate-y-0":e.isLoaded}]),style:{transition:"all 0.6s ease-out 0.4s"}},[e.profile.vcard?.is_active?(l(),d("button",{key:0,onClick:n,class:"flex items-center gap-2 px-5 py-3 rounded-xl font-semibold transition-all duration-300 hover:scale-105",style:x({backgroundColor:e.settings.primary_color,color:"#ffffff"})},[f(r(le),{class:"w-5 h-5"}),i[0]||(i[0]=S(" Guardar Contacto ",-1))],4)):g("",!0),s("button",{onClick:m,class:"flex items-center gap-2 px-5 py-3 rounded-xl font-semibold transition-all duration-300 hover:scale-105",style:x({backgroundColor:`${e.settings.primary_color}20`,color:e.settings.primary_color,border:`1px solid ${e.settings.primary_color}`})},[f(r(ie),{class:"w-5 h-5"}),i[1]||(i[1]=S(" Compartir ",-1))],4)],2),s("div",{class:"text-center mt-8 opacity-50",style:x({color:e.settings.text_secondary_color})},[s("div",Fe,[f(r(re),{class:"w-3 h-3"}),s("span",null,k(e.profile.views_count.toLocaleString())+" visitas",1)])],4),s("div",Re,[s("a",{href:"/",class:"inline-flex items-center gap-1 text-xs opacity-40 hover:opacity-70 transition-opacity",style:x({color:e.settings.text_secondary_color})},[f(r(ce),{class:"w-3 h-3"}),i[2]||(i[2]=S(" Creado con ConectLink ",-1))],4)])],64))}}),We={class:"relative bg-white rounded-t-3xl sm:rounded-3xl w-full max-w-sm p-6 animate-slide-up"},Ee={class:"space-y-3"},Ne=["href"],qe=z({__name:"ShareMenu",props:{modelValue:{type:Boolean},profile:{},currentUrl:{}},emits:["update:modelValue","copy-url"],setup(e,{emit:a}){const o=a;function n(){o("update:modelValue",!1)}function m(){o("copy-url"),n()}return(c,i)=>(l(),C(F,{to:"body"},[e.modelValue?(l(),d("div",{key:0,class:"fixed inset-0 z-50 flex items-end sm:items-center justify-center p-4",onClick:B(n,["self"])},[s("div",{class:"absolute inset-0 bg-black/60",onClick:n}),s("div",We,[i[2]||(i[2]=s("h3",{class:"text-lg font-bold text-gray-900 mb-4"},"Compartir perfil",-1)),s("div",Ee,[s("button",{onClick:m,class:"flex items-center gap-3 w-full p-3 rounded-xl bg-gray-100 hover:bg-gray-200 transition-colors"},[f(r(j),{icon:r(ne),class:"w-5 h-5 text-gray-600"},null,8,["icon"]),i[0]||(i[0]=s("span",{class:"font-medium text-gray-700"},"Copiar enlace",-1))]),s("a",{href:`https://wa.me/?text=${encodeURIComponent(`Mira el perfil de ${e.profile.name}: ${e.currentUrl}`)}`,target:"_blank",class:"flex items-center gap-3 w-full p-3 rounded-xl bg-green-50 hover:bg-green-100 transition-colors"},[f(r(j),{icon:r(H),class:"w-5 h-5 text-green-600"},null,8,["icon"]),i[1]||(i[1]=s("span",{class:"font-medium text-green-700"},"Compartir en WhatsApp",-1))],8,Ne)]),s("button",{onClick:n,class:"w-full mt-4 py-3 text-gray-500 font-medium"}," Cancelar ")])])):g("",!0)]))}}),He=L(qe,[["__scopeId","data-v-54def3da"]]),Ge=["content"],Xe=["content"],Ye=["content"],Je=["content"],Ke={class:"relative z-10 mx-auto max-w-lg px-4 py-8 pb-32"},Oe=z({__name:"ProfilePage",props:{organization:{},profile:{},products:{},categories:{},sections:{}},setup(e){const a=e,o=$(!1),n=$([]),m=$([]),c=$(!1),i=$(null),b=$(!1),h=$(""),{settings:p,backgroundStyle:U}=q(a.profile.settings);function A(u){n.value.push(u)}function V(u){i.value=u,c.value=!0}async function t(){const u=a.profile.is_primary?`/${a.organization.slug}/vcard`:`/${a.organization.slug}/${a.profile.slug}/vcard`;window.location.href=u}async function y(){const u=h.value,w=`${a.profile.name} - ${a.organization.name}`;if(navigator.share)try{await navigator.share({title:w,url:u})}catch{b.value=!0}else b.value=!0}function v(){navigator.clipboard.writeText(h.value),b.value=!1}return E(c,u=>{u||(i.value=null)}),W(()=>{h.value=window.location.href,setTimeout(()=>{o.value=!0},100),a.profile.floating_alerts.forEach(u=>{u.show_on_load&&setTimeout(()=>{m.value.push(u.id)},u.delay_seconds*1e3)})}),(u,w)=>(l(),d(I,null,[f(r(K),{title:`${e.profile.name} | ${e.organization.name}`},{default:N(()=>[s("meta",{name:"description",content:e.profile.bio||e.profile.slogan||e.organization.description},null,8,Ge),s("meta",{property:"og:title",content:`${e.profile.name} | ${e.organization.name}`},null,8,Xe),s("meta",{property:"og:description",content:e.profile.slogan||e.profile.bio},null,8,Ye),s("meta",{property:"og:image",content:e.profile.photo||e.organization.logo_url},null,8,Je)]),_:1},8,["title"]),s("div",{class:"min-h-screen",style:x(r(U))},[f(he,{settings:r(p)},null,8,["settings"]),s("main",Ke,[f(_,{profile:e.profile,organization:e.organization,settings:r(p),"is-loaded":o.value},null,8,["profile","organization","settings","is-loaded"]),f(ee,{links:e.profile.social_links,settings:r(p),"is-loaded":o.value},null,8,["links","settings","is-loaded"]),f(te,{links:e.profile.custom_links,settings:r(p),"is-loaded":o.value},null,8,["links","settings","is-loaded"]),e.products&&e.products.length>0||e.sections&&e.sections.length>0?(l(),C(oe,{key:0,products:e.products||[],categories:e.categories||[],sections:e.sections||[],settings:r(p),"is-loaded":o.value,onProductSelected:V},null,8,["products","categories","sections","settings","is-loaded"])):g("",!0),f(Te,{profile:e.profile,organization:e.organization,settings:r(p),"is-loaded":o.value,"current-url":h.value,onDownloadVcard:t,onShare:y},null,8,["profile","organization","settings","is-loaded","current-url"])]),f(Be,{alerts:e.profile.floating_alerts,"visible-alerts":m.value,"dismissed-alerts":n.value,onDismiss:A},null,8,["alerts","visible-alerts","dismissed-alerts"]),f(Ve,{modelValue:c.value,"onUpdate:modelValue":w[0]||(w[0]=P=>c.value=P),product:i.value,profile:e.profile,settings:r(p)},null,8,["modelValue","product","profile","settings"]),f(He,{modelValue:b.value,"onUpdate:modelValue":w[1]||(w[1]=P=>b.value=P),profile:e.profile,"current-url":h.value,onCopyUrl:v},null,8,["modelValue","profile","current-url"])],4)],64))}}),gt=L(Oe,[["__scopeId","data-v-6b822d6c"]]);export{gt as default};
