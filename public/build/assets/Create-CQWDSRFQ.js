import{d as h,u as C,A as S,r as x,w as k,o as N,e as m,f as a,g as t,i as U,j as n,k as o,z as $,p as l,l as c,m as p,t as u,B,C as O,F as T}from"./vendor-CwJ9eRpz.js";import{B as j,_ as D}from"./AppLayout.vue_vue_type_script_setup_true_lang-BrY3Mbxo.js";import{u as F}from"./useSwal-DOVGsU6a.js";import{_ as b}from"./RadioCard.vue_vue_type_script_setup_true_lang-B6lQHour.js";import{_ as M}from"./ImageUpload.vue_vue_type_script_setup_true_lang-BCuO3NCY.js";import{_ as y}from"./Input.vue_vue_type_script_setup_true_lang-BOJ85c3X.js";import{_ as d}from"./Label.vue_vue_type_script_setup_true_lang-DTGu4m7n.js";import{_ as v}from"./index-aHHv8Tf2.js";import{S as P}from"./sparkles-Bi2ToExK.js";import{U as q}from"./user-Bp9gVkuh.js";import{A}from"./arrow-right-N1ZxpPdX.js";import"./VisuallyHidden-DI7LxRb7.js";import"./useForwardExpose-CraSWOVP.js";import"./PopperContent-BZm8OVWI.js";import"./getActiveElement-FUKBWQwh.js";import"./useSize-DPlu3iF4.js";import"./Presence-DPRxqr4Y.js";import"./Teleport-DJyIM2_Y.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./RovingFocusGroup-Bg8F_nie.js";import"./Collection-DW7XR1O_.js";import"./index-By14V8Wx.js";import"./createLucideIcon-ColtdVoX.js";import"./DialogTitle-BN7VPbnW.js";import"./x-BzXzP8xs.js";import"./DialogDescription-BEVBDaXg.js";import"./layout-grid-xuEGYM1Q.js";import"./credit-card-mbP66do9.js";import"./chevron-right-CIYxK5Th.js";import"./check-BtJmg7Qw.js";import"./image-DEgvf-8L.js";const E={class:"flex-1 p-4 md:p-6"},L={class:"mx-auto max-w-2xl"},R={class:"mb-8 text-center"},I={class:"mx-auto flex h-16 w-16 items-center justify-center rounded-2xl bg-gradient-to-br from-cyan-500 to-cyan-600"},G={class:"space-y-4"},J={class:"grid gap-4 sm:grid-cols-2"},K={class:"space-y-4"},X={class:"space-y-2"},H={key:0,class:"text-sm text-destructive"},Q={class:"space-y-2"},W={class:"flex items-center gap-2"},Y={key:0,class:"text-sm text-destructive"},Z={class:"space-y-2"},ee={class:"text-xs text-muted-foreground text-right"},te={key:0,class:"text-sm text-destructive"},se={class:"flex justify-end gap-4 pt-4"},De=h({__name:"Create",setup(oe){const _=C(),w=F(),s=S({name:"",slug:"",type:"business",description:"",logo:null}),f=x(!1),g=x(!1);k(()=>s.name,async i=>{if(!f.value&&i){g.value=!0;try{const r=await(await fetch("/admin/organizations/suggest-slug",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]')?.getAttribute("content")||""},body:JSON.stringify({name:i})})).json();s.slug=r.slug}catch{s.slug=i.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"")}g.value=!1}});function V(){f.value=!0}function z(){s.post("/admin/organizations",{forceFormData:!0})}return N(()=>{const i=_.props.flash;i?.error&&w.error(i.error)}),(i,e)=>(p(),m(T,null,[a(t(U),{title:"Nueva Organización"}),a(D,{breadcrumbs:[{title:"Dashboard",href:"/admin"},{title:"Organizaciones",href:"/admin/organizations"},{title:"Crear",href:"/admin/organizations/create"}]},{default:n(()=>[o("div",E,[o("div",L,[o("div",R,[o("div",I,[a(t(P),{class:"h-8 w-8 text-white"})]),e[7]||(e[7]=o("h1",{class:"mt-4 text-2xl font-bold"},"Crear Organización",-1)),e[8]||(e[8]=o("p",{class:"mt-2 text-muted-foreground"}," Configura tu empresa, negocio o perfil personal ",-1))]),o("form",{onSubmit:$(z,["prevent"]),class:"space-y-8"},[o("div",G,[a(t(d),{class:"text-base font-semibold"},{default:n(()=>[...e[9]||(e[9]=[l("Tipo de organización",-1)])]),_:1}),o("div",J,[a(t(b),{modelValue:t(s).type,"onUpdate:modelValue":e[0]||(e[0]=r=>t(s).type=r),value:"business",label:"Empresa / Negocio",description:"Para negocios con múltiples empleados o departamentos",icon:t(j)},null,8,["modelValue","icon"]),a(t(b),{modelValue:t(s).type,"onUpdate:modelValue":e[1]||(e[1]=r=>t(s).type=r),value:"personal",label:"Personal",description:"Para freelancers, profesionales o marca personal",icon:t(q)},null,8,["modelValue","icon"])])]),o("div",K,[a(t(d),{class:"text-base font-semibold"},{default:n(()=>[...e[10]||(e[10]=[l("Logo (opcional)",-1)])]),_:1}),a(t(M),{modelValue:t(s).logo,"onUpdate:modelValue":e[2]||(e[2]=r=>t(s).logo=r),"aspect-ratio":"square",placeholder:"Sube el logo de tu organización","max-size":2},null,8,["modelValue"])]),o("div",X,[a(t(d),{for:"name",class:"text-base font-semibold"},{default:n(()=>[...e[11]||(e[11]=[l("Nombre",-1)])]),_:1}),a(t(y),{id:"name",modelValue:t(s).name,"onUpdate:modelValue":e[3]||(e[3]=r=>t(s).name=r),type:"text",placeholder:"Mi Empresa",class:"h-12",required:""},null,8,["modelValue"]),t(s).errors.name?(p(),m("p",H,u(t(s).errors.name),1)):c("",!0)]),o("div",Q,[a(t(d),{for:"slug",class:"text-base font-semibold"},{default:n(()=>[...e[12]||(e[12]=[l("URL personalizada",-1)])]),_:1}),o("div",W,[e[13]||(e[13]=o("span",{class:"text-sm text-muted-foreground whitespace-nowrap"}," conectlink.cnva.mx/ ",-1)),a(t(y),{id:"slug",modelValue:t(s).slug,"onUpdate:modelValue":e[4]||(e[4]=r=>t(s).slug=r),type:"text",placeholder:"mi-empresa",class:"h-12 font-mono",maxlength:"60",required:"",onInput:V},null,8,["modelValue"])]),e[14]||(e[14]=o("p",{class:"text-xs text-muted-foreground"}," Solo letras minúsculas, números y guiones. Máximo 60 caracteres. ",-1)),t(s).errors.slug?(p(),m("p",Y,u(t(s).errors.slug),1)):c("",!0)]),o("div",Z,[a(t(d),{for:"description",class:"text-base font-semibold"},{default:n(()=>[...e[15]||(e[15]=[l("Descripción (opcional)",-1)])]),_:1}),B(o("textarea",{id:"description","onUpdate:modelValue":e[5]||(e[5]=r=>t(s).description=r),rows:"3",class:"w-full rounded-lg border bg-background px-4 py-3 text-sm",placeholder:"Breve descripción de tu organización...",maxlength:"500"},null,512),[[O,t(s).description]]),o("p",ee,u(t(s).description.length)+"/500 ",1),t(s).errors.description?(p(),m("p",te,u(t(s).errors.description),1)):c("",!0)]),o("div",se,[a(t(v),{type:"button",variant:"outline",onClick:e[6]||(e[6]=r=>i.$inertia.visit("/admin/organizations"))},{default:n(()=>[...e[16]||(e[16]=[l(" Cancelar ",-1)])]),_:1}),a(t(v),{type:"submit",disabled:t(s).processing,class:"gap-2"},{default:n(()=>[e[17]||(e[17]=l(" Crear Organización ",-1)),a(t(A),{class:"h-4 w-4"})]),_:1},8,["disabled"])])],32)])])]),_:1})],64))}});export{De as default};
