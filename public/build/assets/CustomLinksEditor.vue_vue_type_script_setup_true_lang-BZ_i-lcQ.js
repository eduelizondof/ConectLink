import{d as ee,r as z,A as oe,c as P,H as te,D as le,e as f,k as i,f as t,x as I,l as y,t as k,j as a,p as r,g as o,F as ae,s as se,m as u,z as q,n as ie,v as re,G as B}from"./vendor-CwJ9eRpz.js";import{u as ne}from"./useSwal-DOVGsU6a.js";import{_ as w}from"./Input.vue_vue_type_script_setup_true_lang-BOJ85c3X.js";import{_ as m}from"./Label.vue_vue_type_script_setup_true_lang-DTGu4m7n.js";import{_}from"./index-aHHv8Tf2.js";import{_ as U}from"./ColorPicker.vue_vue_type_script_setup_true_lang-CmaLZnPB.js";import{_ as N}from"./ImageUpload.vue_vue_type_script_setup_true_lang-BCuO3NCY.js";import{_ as S,a as L,b as E,c as A,d as p,C as de}from"./SelectValue.vue_vue_type_script_setup_true_lang-D8OnKVtz.js";import{_ as R,a as G,b as H,c as O}from"./DialogTitle.vue_vue_type_script_setup_true_lang-C18qZcbt.js";import{P as ue}from"./plus-ggKBdC47.js";import{L as J}from"./link-2-BijLee4B.js";import{c as me}from"./createLucideIcon-ColtdVoX.js";import{P as pe}from"./pencil-GOH_MpO7.js";import{T as fe}from"./trash-2-CHHS8M2q.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=me("ChevronUpIcon",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),ge={class:"rounded-xl border bg-card p-6 space-y-4"},ve={class:"flex items-center justify-between"},_e={class:"text-sm text-muted-foreground"},xe={key:0,class:"space-y-2"},be=["src","alt"],ye={class:"flex-1 min-w-0"},Ve={class:"font-medium truncate"},ke={key:0,class:"text-xs text-muted-foreground truncate"},we={class:"text-xs text-muted-foreground truncate"},Ce={class:"flex items-center gap-2"},je={class:"flex flex-col gap-0.5"},$e={key:1,class:"text-center py-8 text-muted-foreground"},ze={class:"space-y-2"},Ue={class:"space-y-2"},Se={class:"space-y-2"},Le={class:"space-y-2"},Ee={key:0,class:"grid gap-4 sm:grid-cols-2"},Ae={class:"space-y-2"},Te={class:"space-y-2"},De={class:"grid gap-4 sm:grid-cols-2"},Fe={class:"space-y-2"},Ie={class:"space-y-2"},Me={class:"flex justify-end gap-3 pt-2"},Pe={class:"space-y-2"},qe={class:"space-y-2"},Be={class:"space-y-2"},Ne={class:"space-y-2"},Re={key:0,class:"text-xs text-muted-foreground"},Ge={key:0,class:"grid gap-4 sm:grid-cols-2"},He={class:"space-y-2"},Oe={class:"space-y-2"},Je={class:"grid gap-4 sm:grid-cols-2"},Ke={class:"space-y-2"},Qe={class:"space-y-2"},We={class:"flex justify-end gap-3 pt-2"},mo=ee({__name:"CustomLinksEditor",props:{profile:{},maxLinks:{}},setup(j){const g=j,x=ne(),V=z(!1),b=z(!1),d=z(null),T=z(!1),s=oe({title:"",url:"",description:"",image:null,image_position:"",image_shape:"",button_color:null,text_color:null}),K=P(()=>((g.profile.custom_links||g.profile.customLinks||[]).length||0)<g.maxLinks),D=P(()=>{const n=g.profile.custom_links||g.profile.customLinks||[];return!n||!Array.isArray(n)?[]:[...n].sort((e,l)=>(e.sort_order||0)-(l.sort_order||0))});te(async()=>{T.value=!0,V.value=!1,b.value=!1,await le()});function Q(){d.value=null,s.reset(),V.value=!0}function W(n){d.value=n,s.reset(),s.title=n.title||"",s.url=n.url||"",s.description=n.description||"",s.image=null,s.image_position=n.image_position||"",s.image_shape=n.image_shape||"",s.button_color=n.button_color||null,s.text_color=n.text_color||null,b.value=!0}function X(){s.post(`/admin/profiles/${g.profile.id}/custom-links`,{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{V.value=!1,x.success("춰Tarjeta agregada!")}})}function Y(){d.value&&(s.image instanceof File?s.transform(n=>({...n,button_color:n.button_color||"",text_color:n.text_color||"",_method:"PUT"})).post(`/admin/custom-links/${d.value.id}`,{preserveScroll:!0,forceFormData:!0,onSuccess:()=>{b.value=!1,d.value=null,x.success("춰Tarjeta actualizada!")},onError:n=>{console.error("Error updating link:",n),x.error("Error al actualizar la tarjeta")}}):s.transform(n=>{const{image:e,...l}=n;return{...l,button_color:l.button_color||"",text_color:l.text_color||""}}).put(`/admin/custom-links/${d.value.id}`,{preserveScroll:!0,onSuccess:()=>{b.value=!1,d.value=null,x.success("춰Tarjeta actualizada!")},onError:n=>{console.error("Error updating link:",n),x.error("Error al actualizar la tarjeta")}}))}async function Z(n){await x.confirmDelete(n.title)&&B.delete(`/admin/custom-links/${n.id}`,{preserveScroll:!0})}function M(n,e){const c=[...g.profile.custom_links||g.profile.customLinks||[]].sort((C,F)=>(C.sort_order||0)-(F.sort_order||0)),v=c.findIndex(C=>C.id===n.id);if(v===-1)return;const $=e==="up"?v-1:v+1;if($<0||$>=c.length)return;[c[v],c[$]]=[c[$],c[v]];const h=c.map((C,F)=>({id:C.id,sort_order:F}));B.post(`/admin/profiles/${g.profile.id}/custom-links/reorder`,{items:h},{preserveScroll:!0,onSuccess:()=>{x.success("춰Orden actualizado!")},onError:()=>{x.error("Error al actualizar el orden")}})}return(n,e)=>(u(),f("div",ge,[i("div",ve,[i("div",null,[e[20]||(e[20]=i("h3",{class:"font-semibold"},"Tarjetas Personalizadas",-1)),i("p",_e,k((j.profile.custom_links||j.profile.customLinks||[]).length)+"/"+k(j.maxLinks)+" tarjetas ",1)]),K.value?(u(),I(o(_),{key:0,size:"sm",onClick:Q,class:"gap-1"},{default:a(()=>[t(o(ue),{class:"h-4 w-4"}),e[21]||(e[21]=r(" Agregar ",-1))]),_:1})):y("",!0)]),D.value.length?(u(),f("div",xe,[(u(!0),f(ae,null,se(D.value,(l,c)=>(u(),f("div",{key:l.id,class:"flex items-center gap-3 rounded-lg border p-3 transition-all hover:bg-muted/50"},[l.image||l.thumbnail?(u(),f("div",{key:0,class:ie(["flex-shrink-0 overflow-hidden",{"h-10 w-10":l.image_position==="left"||l.image_position==="right"||!l.image_position,"h-16 w-16":l.image_position==="top"||l.image_position==="bottom","rounded-lg":l.image_shape==="square"||!l.image_shape,"rounded-full":l.image_shape==="circle"}])},[i("img",{src:l.image?`/storage/${l.image}`:l.thumbnail?`/storage/${l.thumbnail}`:"",alt:l.title,class:"h-full w-full object-cover"},null,8,be)],2)):(u(),f("div",{key:1,class:"flex h-10 w-10 items-center justify-center rounded-lg flex-shrink-0",style:re({backgroundColor:l.button_color||"#3b82f6"})},[t(o(J),{class:"h-5 w-5 text-white"})],4)),i("div",ye,[i("p",Ve,k(l.title),1),l.description?(u(),f("p",ke,k(l.description),1)):y("",!0),i("p",we,k(l.url),1)]),i("div",Ce,[i("div",je,[t(o(_),{size:"icon",variant:"ghost",class:"h-6 w-6",disabled:c===0,onClick:v=>M(l,"up"),title:"Mover arriba"},{default:a(()=>[t(o(ce),{class:"h-3 w-3"})]),_:1},8,["disabled","onClick"]),t(o(_),{size:"icon",variant:"ghost",class:"h-6 w-6",disabled:c===D.value.length-1,onClick:v=>M(l,"down"),title:"Mover abajo"},{default:a(()=>[t(o(de),{class:"h-3 w-3"})]),_:1},8,["disabled","onClick"])]),t(o(_),{size:"icon",variant:"ghost",onClick:v=>W(l),title:"Editar"},{default:a(()=>[t(o(pe),{class:"h-4 w-4"})]),_:1},8,["onClick"]),t(o(_),{size:"icon",variant:"ghost",onClick:v=>Z(l)},{default:a(()=>[t(o(fe),{class:"h-4 w-4 text-destructive"})]),_:1},8,["onClick"])])]))),128))])):(u(),f("div",$e,[t(o(J),{class:"h-12 w-12 mx-auto mb-3 opacity-50"}),e[22]||(e[22]=i("p",null,"No hay tarjetas personalizadas",-1))])),t(o(O),{open:V.value,"onUpdate:open":e[9]||(e[9]=l=>V.value=l),modal:!0},{default:a(()=>[T.value?y("",!0):(u(),I(o(R),{key:0,class:"max-w-md max-h-[90vh] overflow-y-auto","aria-describedby":"add-link-description"},{default:a(()=>[t(o(G),null,{default:a(()=>[t(o(H),null,{default:a(()=>[...e[23]||(e[23]=[r("Agregar Tarjeta",-1)])]),_:1})]),_:1}),e[41]||(e[41]=i("p",{id:"add-link-description",class:"sr-only"},"Formulario para agregar una nueva tarjeta personalizada",-1)),i("form",{onSubmit:q(X,["prevent"]),class:"space-y-4"},[i("div",ze,[t(o(m),{for:"link-title"},{default:a(()=>[...e[24]||(e[24]=[r("T칤tulo *",-1)])]),_:1}),t(o(w),{id:"link-title",modelValue:o(s).title,"onUpdate:modelValue":e[0]||(e[0]=l=>o(s).title=l),placeholder:"游닍 Ver mi cat치logo",required:""},null,8,["modelValue"])]),i("div",Ue,[t(o(m),{for:"link-url"},{default:a(()=>[...e[25]||(e[25]=[r("URL",-1)])]),_:1}),t(o(w),{id:"link-url",modelValue:o(s).url,"onUpdate:modelValue":e[1]||(e[1]=l=>o(s).url=l),placeholder:"https://... (opcional)"},null,8,["modelValue"]),e[26]||(e[26]=i("p",{class:"text-xs text-muted-foreground"},"Deja vac칤o para crear una tarjeta informativa sin enlace",-1))]),i("div",Se,[t(o(m),{for:"link-description"},{default:a(()=>[...e[27]||(e[27]=[r("Descripci칩n",-1)])]),_:1}),t(o(w),{id:"link-description",modelValue:o(s).description,"onUpdate:modelValue":e[2]||(e[2]=l=>o(s).description=l),placeholder:"Breve descripci칩n..."},null,8,["modelValue"])]),i("div",Le,[t(o(m),null,{default:a(()=>[...e[28]||(e[28]=[r("Imagen",-1)])]),_:1}),t(o(N),{modelValue:o(s).image,"onUpdate:modelValue":e[3]||(e[3]=l=>o(s).image=l),"aspect-ratio":"auto","max-size":2,placeholder:"Arrastra una imagen o haz clic para seleccionar"},null,8,["modelValue"])]),o(s).image?(u(),f("div",Ee,[i("div",Ae,[t(o(m),null,{default:a(()=>[...e[29]||(e[29]=[r("Posici칩n de la imagen",-1)])]),_:1}),t(o(S),{modelValue:o(s).image_position,"onUpdate:modelValue":e[4]||(e[4]=l=>o(s).image_position=l)},{default:a(()=>[t(o(L),null,{default:a(()=>[t(o(E),{placeholder:"Seleccionar posici칩n"})]),_:1}),t(o(A),null,{default:a(()=>[t(o(p),{value:"left"},{default:a(()=>[...e[30]||(e[30]=[r("Izquierda (como icono)",-1)])]),_:1}),t(o(p),{value:"right"},{default:a(()=>[...e[31]||(e[31]=[r("Derecha (como icono)",-1)])]),_:1}),t(o(p),{value:"top"},{default:a(()=>[...e[32]||(e[32]=[r("Arriba (prominente)",-1)])]),_:1}),t(o(p),{value:"bottom"},{default:a(()=>[...e[33]||(e[33]=[r("Abajo (prominente)",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),i("div",Te,[t(o(m),null,{default:a(()=>[...e[34]||(e[34]=[r("Forma de la imagen",-1)])]),_:1}),t(o(S),{modelValue:o(s).image_shape,"onUpdate:modelValue":e[5]||(e[5]=l=>o(s).image_shape=l)},{default:a(()=>[t(o(L),null,{default:a(()=>[t(o(E),{placeholder:"Seleccionar forma"})]),_:1}),t(o(A),null,{default:a(()=>[t(o(p),{value:"square"},{default:a(()=>[...e[35]||(e[35]=[r("Cuadrada",-1)])]),_:1}),t(o(p),{value:"circle"},{default:a(()=>[...e[36]||(e[36]=[r("Redonda",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])])])):y("",!0),i("div",De,[i("div",Fe,[t(o(U),{modelValue:o(s).button_color,"onUpdate:modelValue":e[6]||(e[6]=l=>o(s).button_color=l),label:"Color del bot칩n"},null,8,["modelValue"]),e[37]||(e[37]=i("p",{class:"text-xs text-muted-foreground"},' Si no especificas un color, se usar치 el color de fondo de las tarjetas configurado en la pesta침a "Estilos" ',-1))]),i("div",Ie,[t(o(U),{modelValue:o(s).text_color,"onUpdate:modelValue":e[7]||(e[7]=l=>o(s).text_color=l),label:"Color del texto"},null,8,["modelValue"]),e[38]||(e[38]=i("p",{class:"text-xs text-muted-foreground"},' Si no especificas un color, se usar치 el color de texto configurado en la pesta침a "Estilos" ',-1))])]),i("div",Me,[t(o(_),{type:"button",variant:"outline",onClick:e[8]||(e[8]=l=>V.value=!1)},{default:a(()=>[...e[39]||(e[39]=[r(" Cancelar ",-1)])]),_:1}),t(o(_),{type:"submit",disabled:o(s).processing},{default:a(()=>[...e[40]||(e[40]=[r(" Agregar ",-1)])]),_:1},8,["disabled"])])],32)]),_:1}))]),_:1},8,["open"]),t(o(O),{open:b.value,"onUpdate:open":e[19]||(e[19]=l=>b.value=l),modal:!0},{default:a(()=>[!T.value&&d.value?(u(),I(o(R),{key:0,class:"max-w-md max-h-[90vh] overflow-y-auto","aria-describedby":"edit-link-description"},{default:a(()=>[t(o(G),null,{default:a(()=>[t(o(H),null,{default:a(()=>[...e[42]||(e[42]=[r("Editar Tarjeta",-1)])]),_:1})]),_:1}),e[60]||(e[60]=i("p",{id:"edit-link-description",class:"sr-only"},"Formulario para editar una tarjeta personalizada existente",-1)),i("form",{onSubmit:q(Y,["prevent"]),class:"space-y-4"},[i("div",Pe,[t(o(m),{for:"edit-link-title"},{default:a(()=>[...e[43]||(e[43]=[r("T칤tulo *",-1)])]),_:1}),t(o(w),{id:"edit-link-title",modelValue:o(s).title,"onUpdate:modelValue":e[10]||(e[10]=l=>o(s).title=l),placeholder:"游닍 Ver mi cat치logo",required:""},null,8,["modelValue"])]),i("div",qe,[t(o(m),{for:"edit-link-url"},{default:a(()=>[...e[44]||(e[44]=[r("URL",-1)])]),_:1}),t(o(w),{id:"edit-link-url",modelValue:o(s).url,"onUpdate:modelValue":e[11]||(e[11]=l=>o(s).url=l),placeholder:"https://... (opcional)"},null,8,["modelValue"]),e[45]||(e[45]=i("p",{class:"text-xs text-muted-foreground"},"Deja vac칤o para crear una tarjeta informativa sin enlace",-1))]),i("div",Be,[t(o(m),{for:"edit-link-description"},{default:a(()=>[...e[46]||(e[46]=[r("Descripci칩n",-1)])]),_:1}),t(o(w),{id:"edit-link-description",modelValue:o(s).description,"onUpdate:modelValue":e[12]||(e[12]=l=>o(s).description=l),placeholder:"Breve descripci칩n..."},null,8,["modelValue"])]),i("div",Ne,[t(o(m),null,{default:a(()=>[...e[47]||(e[47]=[r("Imagen",-1)])]),_:1}),t(o(N),{modelValue:o(s).image,"onUpdate:modelValue":e[13]||(e[13]=l=>o(s).image=l),"aspect-ratio":"auto","max-size":2,placeholder:"Arrastra una imagen o haz clic para seleccionar"},null,8,["modelValue"]),d.value&&(d.value.image||d.value.thumbnail)&&!o(s).image?(u(),f("p",Re," Imagen actual: "+k(d.value.image||d.value.thumbnail),1)):y("",!0)]),o(s).image||d.value&&(d.value.image||d.value.thumbnail)?(u(),f("div",Ge,[i("div",He,[t(o(m),null,{default:a(()=>[...e[48]||(e[48]=[r("Posici칩n de la imagen",-1)])]),_:1}),t(o(S),{modelValue:o(s).image_position,"onUpdate:modelValue":e[14]||(e[14]=l=>o(s).image_position=l)},{default:a(()=>[t(o(L),null,{default:a(()=>[t(o(E),{placeholder:"Seleccionar posici칩n"})]),_:1}),t(o(A),null,{default:a(()=>[t(o(p),{value:"left"},{default:a(()=>[...e[49]||(e[49]=[r("Izquierda (como icono)",-1)])]),_:1}),t(o(p),{value:"right"},{default:a(()=>[...e[50]||(e[50]=[r("Derecha (como icono)",-1)])]),_:1}),t(o(p),{value:"top"},{default:a(()=>[...e[51]||(e[51]=[r("Arriba (prominente)",-1)])]),_:1}),t(o(p),{value:"bottom"},{default:a(()=>[...e[52]||(e[52]=[r("Abajo (prominente)",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),i("div",Oe,[t(o(m),null,{default:a(()=>[...e[53]||(e[53]=[r("Forma de la imagen",-1)])]),_:1}),t(o(S),{modelValue:o(s).image_shape,"onUpdate:modelValue":e[15]||(e[15]=l=>o(s).image_shape=l)},{default:a(()=>[t(o(L),null,{default:a(()=>[t(o(E),{placeholder:"Seleccionar forma"})]),_:1}),t(o(A),null,{default:a(()=>[t(o(p),{value:"square"},{default:a(()=>[...e[54]||(e[54]=[r("Cuadrada",-1)])]),_:1}),t(o(p),{value:"circle"},{default:a(()=>[...e[55]||(e[55]=[r("Redonda",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])])])):y("",!0),i("div",Je,[i("div",Ke,[t(o(U),{modelValue:o(s).button_color,"onUpdate:modelValue":e[16]||(e[16]=l=>o(s).button_color=l),label:"Color del bot칩n"},null,8,["modelValue"]),e[56]||(e[56]=i("p",{class:"text-xs text-muted-foreground"},' Si no especificas un color, se usar치 el color de fondo de las tarjetas configurado en la pesta침a "Estilos" ',-1))]),i("div",Qe,[t(o(U),{modelValue:o(s).text_color,"onUpdate:modelValue":e[17]||(e[17]=l=>o(s).text_color=l),label:"Color del texto"},null,8,["modelValue"]),e[57]||(e[57]=i("p",{class:"text-xs text-muted-foreground"},' Si no especificas un color, se usar치 el color de texto configurado en la pesta침a "Estilos" ',-1))])]),i("div",We,[t(o(_),{type:"button",variant:"outline",onClick:e[18]||(e[18]=l=>b.value=!1)},{default:a(()=>[...e[58]||(e[58]=[r(" Cancelar ",-1)])]),_:1}),t(o(_),{type:"submit",disabled:o(s).processing},{default:a(()=>[...e[59]||(e[59]=[r(" Actualizar ",-1)])]),_:1},8,["disabled"])])],32)]),_:1})):y("",!0)]),_:1},8,["open"])]))}});export{mo as _};
