import{d as _,r as m,b as I,e as l,k as w,j as r,t as f,F as j,y as v,f as g,g as x,m as S,n as U,l as i}from"./vendor-eHrDt6OH.js";import{X as $}from"./x-KLv2TS68.js";import{I as B}from"./image-CWtdtVbT.js";import{c as N}from"./createLucideIcon-jrbd9Vvj.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=N("UploadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),M={class:"space-y-2"},T={key:0,class:"text-sm font-medium"},A=["accept"],E=["src","alt"],L={key:1,class:"flex flex-col items-center text-center pointer-events-none"},H={class:"flex h-14 w-14 items-center justify-center rounded-full bg-muted"},P={class:"mt-4 text-sm font-medium"},X={class:"mt-4 inline-flex items-center gap-2 rounded-lg bg-primary px-4 py-2 text-sm font-medium text-primary-foreground pointer-events-auto hover:bg-primary/90"},G={key:1,class:"text-sm text-destructive"},W=_({__name:"ImageUpload",props:{modelValue:{},currentImage:{},label:{},accept:{},maxSize:{},aspectRatio:{},placeholder:{}},emits:["update:modelValue","remove"],setup(o,{emit:C}){const n=o,p=C,u=m(!1),c=m(null),s=m(null),y=m(null),V=I(()=>{switch(n.aspectRatio){case"square":return"aspect-square";case"video":return"aspect-video";default:return"min-h-[200px]"}}),d=I(()=>c.value?c.value:n.currentImage?`/storage/${n.currentImage}`:null);function h(t){s.value=null;const e=n.accept||"image/*";if(!t.type.match(e.replace("*",".*"))){s.value="Tipo de archivo no válido";return}const a=n.maxSize||2;if(t.size>a*1024*1024){s.value=`El archivo es muy grande (máx ${a}MB)`;return}const k=new FileReader;k.onload=R=>{c.value=R.target?.result},k.readAsDataURL(t),p("update:modelValue",t)}function D(t){u.value=!1;const e=t.dataTransfer?.files[0];e&&h(e)}function z(t){const a=t.target.files?.[0];a&&h(a)}function b(){y.value?.click()}function F(){c.value=null,p("update:modelValue",null),p("remove")}return(t,e)=>(i(),l("div",M,[o.label?(i(),l("label",T,f(o.label),1)):w("",!0),r("input",{ref_key:"fileInputRef",ref:y,type:"file",class:"sr-only",accept:o.accept||"image/*",onChange:z},null,40,A),r("div",{class:U(["relative flex flex-col items-center justify-center rounded-xl border-2 border-dashed transition-all",[V.value,u.value?"border-primary bg-primary/5":"border-border hover:border-primary/50",d.value?"p-0":"p-6 cursor-pointer"]]),onDragover:e[0]||(e[0]=v(a=>u.value=!0,["prevent"])),onDragleave:e[1]||(e[1]=a=>u.value=!1),onDrop:v(D,["prevent"]),onClick:e[2]||(e[2]=a=>!d.value&&b())},[d.value?(i(),l(j,{key:0},[r("img",{src:d.value,alt:o.label||"Preview",class:"h-full w-full rounded-xl object-cover cursor-pointer",onClick:b},null,8,E),r("button",{type:"button",class:"absolute -right-2 -top-2 flex h-8 w-8 items-center justify-center rounded-full bg-destructive text-destructive-foreground shadow-lg hover:bg-destructive/90",onClick:v(F,["stop"])},[g(x($),{class:"h-4 w-4"})])],64)):(i(),l("div",L,[r("div",H,[g(x(B),{class:"h-7 w-7 text-muted-foreground"})]),r("p",P,f(o.placeholder||"Arrastra una imagen aquí"),1),e[4]||(e[4]=r("p",{class:"mt-1 text-xs text-muted-foreground"}," o haz clic para seleccionar ",-1)),r("span",X,[g(x(q),{class:"h-4 w-4"}),e[3]||(e[3]=S(" Subir Imagen ",-1))])]))],34),s.value?(i(),l("p",G,f(s.value),1)):w("",!0)]))}});export{W as _};
