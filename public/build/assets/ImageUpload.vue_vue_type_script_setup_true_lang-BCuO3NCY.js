import{d as U,r as m,c as k,w,e as i,l as C,k as l,t as g,F as $,z as p,f as x,g as h,p as j,n as B,m as u}from"./vendor-CwJ9eRpz.js";import{X as N}from"./x-BzXzP8xs.js";import{I as _}from"./image-DEgvf-8L.js";import{c as q}from"./createLucideIcon-ColtdVoX.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=q("UploadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),T={class:"space-y-2"},A={key:0,class:"text-sm font-medium"},E=["accept"],L=["src","alt"],W={key:1,class:"flex flex-col items-center text-center pointer-events-none"},H={class:"flex h-14 w-14 items-center justify-center rounded-full bg-muted"},P={class:"mt-4 text-sm font-medium"},X={key:1,class:"text-sm text-destructive"},Q=U({__name:"ImageUpload",props:{modelValue:{},currentImage:{},label:{},accept:{},maxSize:{},aspectRatio:{},placeholder:{}},emits:["update:modelValue","remove"],setup(n,{emit:V}){const t=n,f=V,c=m(!1),o=m(null),s=m(null),y=m(null),z=k(()=>{switch(t.aspectRatio){case"square":return"aspect-square";case"video":return"aspect-video";default:return"min-h-[200px]"}}),d=k(()=>o.value?o.value:t.currentImage?t.currentImage.startsWith("http")||t.currentImage.startsWith("/")?t.currentImage:`/storage/${t.currentImage}`:null);w(()=>t.modelValue,a=>{!a&&!t.currentImage&&(o.value=null)}),w(()=>t.currentImage,()=>{t.modelValue||(o.value=null)});function b(a){s.value=null;const e=t.accept||"image/*";if(!a.type.match(e.replace("*",".*"))){s.value="Tipo de archivo no válido";return}const r=t.maxSize||2;if(a.size>r*1024*1024){s.value=`El archivo es muy grande (máx ${r}MB)`;return}const I=new FileReader;I.onload=S=>{o.value=S.target?.result},I.readAsDataURL(a),f("update:modelValue",a)}function D(a){c.value=!1;const e=a.dataTransfer?.files[0];e&&b(e)}function F(a){const e=a.target,r=e.files?.[0];r&&b(r),e&&(e.value="")}function v(){y.value?.click()}function R(){o.value=null,f("update:modelValue",null),f("remove")}return(a,e)=>(u(),i("div",T,[n.label?(u(),i("label",A,g(n.label),1)):C("",!0),l("input",{ref_key:"fileInputRef",ref:y,type:"file",class:"sr-only",accept:n.accept||"image/*",onChange:F},null,40,E),l("div",{class:B(["relative flex flex-col items-center justify-center rounded-xl border-2 border-dashed transition-all",[z.value,c.value?"border-primary bg-primary/5":"border-border hover:border-primary/50",d.value?"p-0":"p-6 cursor-pointer"]]),onDragover:e[0]||(e[0]=p(r=>c.value=!0,["prevent"])),onDragleave:e[1]||(e[1]=r=>c.value=!1),onDrop:p(D,["prevent"]),onClick:e[2]||(e[2]=r=>!d.value&&v())},[d.value?(u(),i($,{key:0},[l("img",{src:d.value,alt:n.label||"Preview",class:"h-full w-full rounded-xl object-cover cursor-pointer",onClick:v},null,8,L),l("button",{type:"button",class:"absolute -right-2 -top-2 flex h-8 w-8 items-center justify-center rounded-full bg-destructive text-destructive-foreground shadow-lg hover:bg-destructive/90",onClick:p(R,["stop"])},[x(h(N),{class:"h-4 w-4"})])],64)):(u(),i("div",W,[l("div",H,[x(h(_),{class:"h-7 w-7 text-muted-foreground"})]),l("p",P,g(n.placeholder||"Arrastra una imagen aquí"),1),e[4]||(e[4]=l("p",{class:"mt-1 text-xs text-muted-foreground"}," o haz clic para seleccionar ",-1)),l("button",{type:"button",class:"mt-4 inline-flex items-center gap-2 rounded-lg bg-primary px-4 py-2 text-sm font-medium text-primary-foreground pointer-events-auto hover:bg-primary/90",onClick:p(v,["stop"])},[x(h(M),{class:"h-4 w-4"}),e[3]||(e[3]=j(" Subir Imagen ",-1))])]))],34),s.value?(u(),i("p",X,g(s.value),1)):C("",!0)]))}});export{Q as _};
