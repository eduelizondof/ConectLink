import{as as U,r as N,at as b,A as E,M as x,U as R,b as S,a8 as _,d as w,D as $,au as k,h as C,P as D,av as F,aw as L,O as j,ax as W}from"./vendor-DpV1RDRk.js";import{r as q,S as O}from"./index-CkkXSBcG.js";import{d as g}from"./VisuallyHidden-Bz5Bq7kV.js";function H(i,e="reka"){return`${e}-${U?.()}`}function z(i,e){const s=N(i);function l(u){return e[s.value][u]??s.value}return{state:s,dispatch:u=>{s.value=l(u)}}}function B(i,e){const s=N({}),l=N("none"),a=N(i),u=i.value?"mounted":"unmounted";let c;const d=e.value?.ownerDocument.defaultView??b,{state:f,dispatch:o}=z(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),t=n=>{if(_){const m=new CustomEvent(n,{bubbles:!1,cancelable:!1});e.value?.dispatchEvent(m)}};E(i,async(n,m)=>{const I=m!==n;if(await x(),I){const T=l.value,M=y(e.value);n?(o("MOUNT"),t("enter"),M==="none"&&t("after-enter")):M==="none"||M==="undefined"||s.value?.display==="none"?(o("UNMOUNT"),t("leave"),t("after-leave")):m&&T!==M?(o("ANIMATION_OUT"),t("leave")):(o("UNMOUNT"),t("after-leave"))}},{immediate:!0});const r=n=>{const m=y(e.value),I=m.includes(CSS.escape(n.animationName)),T=f.value==="mounted"?"enter":"leave";if(n.target===e.value&&I&&(t(`after-${T}`),o("ANIMATION_END"),!a.value)){const M=e.value.style.animationFillMode;e.value.style.animationFillMode="forwards",c=d?.setTimeout(()=>{e.value?.style.animationFillMode==="forwards"&&(e.value.style.animationFillMode=M)})}n.target===e.value&&m==="none"&&o("ANIMATION_END")},v=n=>{n.target===e.value&&(l.value=y(e.value))},A=E(e,(n,m)=>{n?(s.value=getComputedStyle(n),n.addEventListener("animationstart",v),n.addEventListener("animationcancel",r),n.addEventListener("animationend",r)):(o("ANIMATION_END"),c!==void 0&&d?.clearTimeout(c),m?.removeEventListener("animationstart",v),m?.removeEventListener("animationcancel",r),m?.removeEventListener("animationend",r))},{immediate:!0}),p=E(f,()=>{const n=y(e.value);l.value=f.value==="mounted"?n:"none"});return R(()=>{A(),p()}),{isPresent:S(()=>["mounted","unmountSuspended"].includes(f.value))}}function y(i){return i&&getComputedStyle(i).animationName||"none"}var J=w({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(i,{slots:e,expose:s}){const{present:l,forceMount:a}=$(i),u=N(),{isPresent:c}=B(l,u);s({present:c});let d=e.default({present:c.value});d=q(d||[]);const f=k();if(d&&d?.length>1){const o=f?.parent?.type.name?`<${f.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${o}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(t=>`  - ${t}`).join(`
`)].join(`
`))}return()=>a.value||l.value||c.value?C(e.default({present:c.value})[0],{ref:o=>{const t=D(o);return typeof t?.hasAttribute>"u"||(t?.hasAttribute("data-reka-popper-content-wrapper")?u.value=t.firstElementChild:u.value=t),t}}):null}});const P="data-reka-collection-item";function Q(i={}){const{key:e="",isProvider:s=!1}=i,l=`${e}CollectionProvider`;let a;if(s){const t=N(new Map);a={collectionRef:N(),itemMap:t},F(l,a)}else a=L(l);const u=(t=!1)=>{const r=a.collectionRef.value;if(!r)return[];const v=Array.from(r.querySelectorAll(`[${P}]`)),p=Array.from(a.itemMap.value.values()).sort((h,n)=>v.indexOf(h.ref)-v.indexOf(n.ref));return t?p:p.filter(h=>h.ref.dataset.disabled!=="")},c=w({name:"CollectionSlot",setup(t,{slots:r}){const{primitiveElement:v,currentElement:A}=g();return E(A,()=>{a.collectionRef.value=A.value}),()=>C(O,{ref:v},r)}}),d=w({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(t,{slots:r,attrs:v}){const{primitiveElement:A,currentElement:p}=g();return j(h=>{if(p.value){const n=W(p.value);a.itemMap.value.set(n,{ref:p.value,value:t.value}),h(()=>a.itemMap.value.delete(n))}}),()=>C(O,{...v,[P]:"",ref:A},r)}}),f=S(()=>Array.from(a.itemMap.value.values())),o=S(()=>a.itemMap.value.size);return{getItems:u,reactiveItems:f,itemMapSize:o,CollectionSlot:c,CollectionItem:d}}export{J as P,Q as a,H as u};
