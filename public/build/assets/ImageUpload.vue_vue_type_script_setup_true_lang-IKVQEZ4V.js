import{d as j,r as m,b as I,e as l,k as w,j as r,t as f,F as S,y as v,f as g,g as x,m as U,n as $,l as i}from"./vendor-DpV1RDRk.js";import{X as B}from"./x-DuwRyV3R.js";import{c as C}from"./createLucideIcon-CVrIePnm.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=C("ImageIcon",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=C("UploadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),L={class:"space-y-2"},M={key:0,class:"text-sm font-medium"},T=["accept"],A=["src","alt"],E={key:1,class:"flex flex-col items-center text-center pointer-events-none"},H={class:"flex h-14 w-14 items-center justify-center rounded-full bg-muted"},P={class:"mt-4 text-sm font-medium"},X={class:"mt-4 inline-flex items-center gap-2 rounded-lg bg-primary px-4 py-2 text-sm font-medium text-primary-foreground pointer-events-auto hover:bg-primary/90"},G={key:1,class:"text-sm text-destructive"},Q=j({__name:"ImageUpload",props:{modelValue:{},currentImage:{},label:{},accept:{},maxSize:{},aspectRatio:{},placeholder:{}},emits:["update:modelValue","remove"],setup(n,{emit:V}){const o=n,p=V,c=m(!1),u=m(null),s=m(null),y=m(null),D=I(()=>{switch(o.aspectRatio){case"square":return"aspect-square";case"video":return"aspect-video";default:return"min-h-[200px]"}}),d=I(()=>u.value?u.value:o.currentImage?`/storage/${o.currentImage}`:null);function h(t){s.value=null;const e=o.accept||"image/*";if(!t.type.match(e.replace("*",".*"))){s.value="Tipo de archivo no válido";return}const a=o.maxSize||2;if(t.size>a*1024*1024){s.value=`El archivo es muy grande (máx ${a}MB)`;return}const k=new FileReader;k.onload=_=>{u.value=_.target?.result},k.readAsDataURL(t),p("update:modelValue",t)}function z(t){c.value=!1;const e=t.dataTransfer?.files[0];e&&h(e)}function F(t){const a=t.target.files?.[0];a&&h(a)}function b(){y.value?.click()}function R(){u.value=null,p("update:modelValue",null),p("remove")}return(t,e)=>(i(),l("div",L,[n.label?(i(),l("label",M,f(n.label),1)):w("",!0),r("input",{ref_key:"fileInputRef",ref:y,type:"file",class:"sr-only",accept:n.accept||"image/*",onChange:F},null,40,T),r("div",{class:$(["relative flex flex-col items-center justify-center rounded-xl border-2 border-dashed transition-all",[D.value,c.value?"border-primary bg-primary/5":"border-border hover:border-primary/50",d.value?"p-0":"p-6 cursor-pointer"]]),onDragover:e[0]||(e[0]=v(a=>c.value=!0,["prevent"])),onDragleave:e[1]||(e[1]=a=>c.value=!1),onDrop:v(z,["prevent"]),onClick:e[2]||(e[2]=a=>!d.value&&b())},[d.value?(i(),l(S,{key:0},[r("img",{src:d.value,alt:n.label||"Preview",class:"h-full w-full rounded-xl object-cover cursor-pointer",onClick:b},null,8,A),r("button",{type:"button",class:"absolute -right-2 -top-2 flex h-8 w-8 items-center justify-center rounded-full bg-destructive text-destructive-foreground shadow-lg hover:bg-destructive/90",onClick:v(R,["stop"])},[g(x(B),{class:"h-4 w-4"})])],64)):(i(),l("div",E,[r("div",H,[g(x(N),{class:"h-7 w-7 text-muted-foreground"})]),r("p",P,f(n.placeholder||"Arrastra una imagen aquí"),1),e[4]||(e[4]=r("p",{class:"mt-1 text-xs text-muted-foreground"}," o haz clic para seleccionar ",-1)),r("span",X,[g(x(q),{class:"h-4 w-4"}),e[3]||(e[3]=U(" Subir Imagen ",-1))])]))],34),s.value?(i(),l("p",G,f(s.value),1)):w("",!0)]))}});export{N as I,Q as _};
