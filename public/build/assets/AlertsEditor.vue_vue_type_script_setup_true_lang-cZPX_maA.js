import{d as G,r as C,z as K,b as O,L as H,M as J,e as p,j as s,f as a,v as g,k as V,t as u,w as n,m as r,g as e,F as y,q as k,l as d,y as Q,n as $,x as S,s as z,B as W,C as X,K as F}from"./vendor-eHrDt6OH.js";import{u as Y}from"./useSwal-DOVGsU6a.js";import{_ as x}from"./Input.vue_vue_type_script_setup_true_lang-BnuwhoGL.js";import{_ as c}from"./Label.vue_vue_type_script_setup_true_lang-BBaMjydA.js";import{_ as b}from"./index-DdtZ7dV8.js";import{_ as B}from"./Checkbox.vue_vue_type_script_setup_true_lang-Cc9ipdgV.js";import{_ as Z}from"./ColorPicker.vue_vue_type_script_setup_true_lang-C-ZSxaER.js";import{_ as ee,a as le,b as oe,c as te}from"./DialogTitle.vue_vue_type_script_setup_true_lang-BluiFz-A.js";import{P as se}from"./plus-Ba9tyEbA.js";import{B as ae}from"./bell-Dyvj004n.js";import{I as j}from"./info-t2__ETNV.js";import{T as ie}from"./tag--yQnzEML.js";import{T as ne}from"./triangle-alert-C6W3dJSo.js";import{C as re,M as de}from"./megaphone-CW2p57C3.js";import{P as ue}from"./pencil-DW-C-4f_.js";import{T as ce}from"./trash-2-FY7NsgHU.js";const me={class:"rounded-xl border bg-card p-6 space-y-4"},pe={class:"flex items-center justify-between"},fe={class:"text-sm text-muted-foreground"},_e={key:0,class:"space-y-2"},ve={class:"flex-1 min-w-0"},be={key:0,class:"font-medium truncate"},ge={class:"text-sm text-muted-foreground truncate"},ye={class:"text-xs text-muted-foreground"},ke={class:"flex items-center gap-2"},xe={key:1,class:"text-center py-8 text-muted-foreground"},he={class:"space-y-2"},we={class:"grid grid-cols-5 gap-2"},Ae=["onClick"],Ce={class:"text-[10px]"},Ve={class:"space-y-2"},$e={class:"space-y-2"},Be={class:"grid gap-4 sm:grid-cols-2"},Te={class:"space-y-2"},Ue={class:"space-y-2"},Me={class:"space-y-2"},Se={class:"grid grid-cols-3 gap-2"},ze=["onClick"],Fe={class:"space-y-2"},je={class:"flex flex-wrap gap-2"},De=["onClick"],Ne={class:"space-y-3"},Pe={class:"flex items-center gap-3"},Ie={class:"flex items-center gap-3"},Ee={class:"space-y-2"},qe={class:"flex justify-end gap-3 pt-2"},sl=G({__name:"AlertsEditor",props:{profile:{},maxAlerts:{}},setup(v){const h=v,w=Y(),f=C(!1),T=C(!1),_=C(null),t=K({title:"",message:"",type:"info",link_url:"",link_text:"",position:"bottom-right",animation:"bounce",background_color:"",is_dismissible:!0,show_on_load:!0,delay_seconds:3}),D=O(()=>(h.profile.floating_alerts?.length||0)<h.maxAlerts);H(async()=>{T.value=!0,f.value=!1,await J()});const A=[{value:"info",label:"Info",icon:j,color:"#3B82F6"},{value:"promo",label:"Promo",icon:ie,color:"#10B981"},{value:"warning",label:"Aviso",icon:ne,color:"#F59E0B"},{value:"success",label:"Ã‰xito",icon:re,color:"#10B981"},{value:"announcement",label:"Anuncio",icon:de,color:"#8B5CF6"}],U=[{value:"top",label:"Arriba"},{value:"bottom",label:"Abajo"},{value:"top-right",label:"Arriba Der."},{value:"top-left",label:"Arriba Izq."},{value:"bottom-right",label:"Abajo Der."},{value:"bottom-left",label:"Abajo Izq."}],M=[{value:"none",label:"Ninguna"},{value:"bounce",label:"Rebote"},{value:"pulse",label:"Pulso"},{value:"shake",label:"Vibrar"},{value:"slide",label:"Deslizar"}];function N(i){return A.find(l=>l.value===i)?.icon||j}function P(i){return A.find(l=>l.value===i)?.color||"#3B82F6"}function I(){_.value=null,t.reset(),t.type="info",t.position="bottom-right",t.animation="bounce",t.is_dismissible=!0,t.show_on_load=!0,t.delay_seconds=3,f.value=!0}function E(i){_.value=i,t.title=i.title||"",t.message=i.message,t.type=i.type,t.link_url=i.link_url||"",t.link_text=i.link_text||"",t.position=i.position,t.animation=i.animation,t.background_color=i.background_color||"",t.is_dismissible=i.is_dismissible,t.show_on_load=i.show_on_load,t.delay_seconds=i.delay_seconds||3,f.value=!0}function q(){_.value?t.put(`/admin/floating-alerts/${_.value.id}`,{preserveScroll:!0,onSuccess:()=>{f.value=!1,_.value=null,w.success("Â¡Alerta actualizada!")}}):t.post(`/admin/profiles/${h.profile.id}/floating-alerts`,{preserveScroll:!0,onSuccess:()=>{f.value=!1,w.success("Â¡Alerta creada!")}})}async function L(i){await w.confirmDelete(i.title||"esta alerta")&&F.delete(`/admin/floating-alerts/${i.id}`,{preserveScroll:!0})}function R(i){F.put(`/admin/floating-alerts/${i.id}`,{...i,is_active:!i.is_active},{preserveScroll:!0})}return(i,l)=>(d(),p("div",me,[s("div",pe,[s("div",null,[l[10]||(l[10]=s("h3",{class:"font-semibold"},"Alertas Flotantes",-1)),s("p",fe,u(v.profile.floating_alerts?.length||0)+"/"+u(v.maxAlerts)+" alertas ",1)]),D.value?(d(),g(e(b),{key:0,size:"sm",onClick:I,class:"gap-1"},{default:n(()=>[a(e(se),{class:"h-4 w-4"}),l[11]||(l[11]=r(" Agregar ",-1))]),_:1})):V("",!0)]),v.profile.floating_alerts?.length?(d(),p("div",_e,[(d(!0),p(y,null,k(v.profile.floating_alerts,o=>(d(),p("div",{key:o.id,class:"flex items-center gap-3 rounded-lg border p-3 transition-all hover:bg-muted/50"},[s("div",{class:"flex h-10 w-10 items-center justify-center rounded-lg text-white",style:z({backgroundColor:o.background_color||P(o.type)})},[(d(),g(S(N(o.type)),{class:"h-5 w-5"}))],4),s("div",ve,[o.title?(d(),p("p",be,u(o.title),1)):V("",!0),s("p",ge,u(o.message),1),s("p",ye,u(U.find(m=>m.value===o.position)?.label)+" â€¢ "+u(M.find(m=>m.value===o.animation)?.label),1)]),s("div",ke,[a(e(B),{checked:o.is_active,"onUpdate:checked":m=>R(o)},null,8,["checked","onUpdate:checked"]),a(e(b),{size:"icon",variant:"ghost",onClick:m=>E(o)},{default:n(()=>[a(e(ue),{class:"h-4 w-4 text-muted-foreground"})]),_:1},8,["onClick"]),a(e(b),{size:"icon",variant:"ghost",onClick:m=>L(o)},{default:n(()=>[a(e(ce),{class:"h-4 w-4 text-destructive"})]),_:1},8,["onClick"])])]))),128))])):(d(),p("div",xe,[a(e(ae),{class:"h-12 w-12 mx-auto mb-3 opacity-50"}),l[12]||(l[12]=s("p",null,"No hay alertas configuradas",-1))])),a(e(te),{open:f.value,"onUpdate:open":l[9]||(l[9]=o=>f.value=o),modal:!0},{default:n(()=>[T.value?V("",!0):(d(),g(e(ee),{key:0,class:"max-w-lg max-h-[90vh] overflow-y-auto"},{default:n(()=>[a(e(le),null,{default:n(()=>[a(e(oe),null,{default:n(()=>[r(u(_.value?"Editar Alerta Flotante":"Nueva Alerta Flotante"),1)]),_:1})]),_:1}),s("form",{onSubmit:Q(q,["prevent"]),class:"space-y-4"},[s("div",he,[a(e(c),null,{default:n(()=>[...l[13]||(l[13]=[r("Tipo de alerta",-1)])]),_:1}),s("div",we,[(d(),p(y,null,k(A,o=>s("button",{key:o.value,type:"button",class:$(["flex flex-col items-center gap-1 rounded-lg border p-2 transition-all",e(t).type===o.value?"border-primary bg-primary/5":"hover:bg-muted"]),onClick:m=>e(t).type=o.value},[(d(),g(S(o.icon),{class:"h-5 w-5",style:z({color:o.color})},null,8,["style"])),s("span",Ce,u(o.label),1)],10,Ae)),64))])]),s("div",Ve,[a(e(c),{for:"alert-title"},{default:n(()=>[...l[14]||(l[14]=[r("TÃ­tulo",-1)])]),_:1}),a(e(x),{id:"alert-title",modelValue:e(t).title,"onUpdate:modelValue":l[0]||(l[0]=o=>e(t).title=o),placeholder:"ðŸŽ‰ Â¡Oferta especial!"},null,8,["modelValue"])]),s("div",$e,[a(e(c),{for:"alert-message"},{default:n(()=>[...l[15]||(l[15]=[r("Mensaje *",-1)])]),_:1}),W(s("textarea",{id:"alert-message","onUpdate:modelValue":l[1]||(l[1]=o=>e(t).message=o),rows:"2",class:"w-full rounded-lg border bg-background px-4 py-3 text-sm",placeholder:"Descuento del 20% en todos los productos...",required:""},null,512),[[X,e(t).message]])]),s("div",Be,[s("div",Te,[a(e(c),{for:"alert-link_url"},{default:n(()=>[...l[16]||(l[16]=[r("URL del botÃ³n",-1)])]),_:1}),a(e(x),{id:"alert-link_url",modelValue:e(t).link_url,"onUpdate:modelValue":l[2]||(l[2]=o=>e(t).link_url=o),placeholder:"https://..."},null,8,["modelValue"])]),s("div",Ue,[a(e(c),{for:"alert-link_text"},{default:n(()=>[...l[17]||(l[17]=[r("Texto del botÃ³n",-1)])]),_:1}),a(e(x),{id:"alert-link_text",modelValue:e(t).link_text,"onUpdate:modelValue":l[3]||(l[3]=o=>e(t).link_text=o),placeholder:"Ver mÃ¡s"},null,8,["modelValue"])])]),s("div",Me,[a(e(c),null,{default:n(()=>[...l[18]||(l[18]=[r("PosiciÃ³n",-1)])]),_:1}),s("div",Se,[(d(),p(y,null,k(U,o=>s("button",{key:o.value,type:"button",class:$(["rounded-lg border px-3 py-2 text-sm transition-all",e(t).position===o.value?"border-primary bg-primary/5 font-medium":"hover:bg-muted"]),onClick:m=>e(t).position=o.value},u(o.label),11,ze)),64))])]),s("div",Fe,[a(e(c),null,{default:n(()=>[...l[19]||(l[19]=[r("AnimaciÃ³n",-1)])]),_:1}),s("div",je,[(d(),p(y,null,k(M,o=>s("button",{key:o.value,type:"button",class:$(["rounded-lg border px-3 py-2 text-sm transition-all",e(t).animation===o.value?"border-primary bg-primary/5 font-medium":"hover:bg-muted"]),onClick:m=>e(t).animation=o.value},u(o.label),11,De)),64))])]),a(e(Z),{modelValue:e(t).background_color,"onUpdate:modelValue":l[4]||(l[4]=o=>e(t).background_color=o),label:"Color de fondo (opcional)"},null,8,["modelValue"]),s("div",Ne,[s("div",Pe,[a(e(B),{id:"alert-dismissible",checked:e(t).is_dismissible,"onUpdate:checked":l[5]||(l[5]=o=>e(t).is_dismissible=o)},null,8,["checked"]),a(e(c),{for:"alert-dismissible",class:"cursor-pointer"},{default:n(()=>[...l[20]||(l[20]=[r(" Se puede cerrar ",-1)])]),_:1})]),s("div",Ie,[a(e(B),{id:"alert-show_on_load",checked:e(t).show_on_load,"onUpdate:checked":l[6]||(l[6]=o=>e(t).show_on_load=o)},null,8,["checked"]),a(e(c),{for:"alert-show_on_load",class:"cursor-pointer"},{default:n(()=>[...l[21]||(l[21]=[r(" Mostrar al cargar la pÃ¡gina ",-1)])]),_:1})])]),s("div",Ee,[a(e(c),{for:"alert-delay"},{default:n(()=>[...l[22]||(l[22]=[r("Retraso (segundos)",-1)])]),_:1}),a(e(x),{id:"alert-delay",modelValue:e(t).delay_seconds,"onUpdate:modelValue":l[7]||(l[7]=o=>e(t).delay_seconds=o),modelModifiers:{number:!0},type:"number",min:"0",max:"30"},null,8,["modelValue"])]),s("div",qe,[a(e(b),{type:"button",variant:"outline",onClick:l[8]||(l[8]=o=>f.value=!1)},{default:n(()=>[...l[23]||(l[23]=[r(" Cancelar ",-1)])]),_:1}),a(e(b),{type:"submit",disabled:e(t).processing},{default:n(()=>[r(u(_.value?"Guardar Cambios":"Crear Alerta"),1)]),_:1},8,["disabled"])])],32)]),_:1}))]),_:1},8,["open"])]))}});export{sl as _};
